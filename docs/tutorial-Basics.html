<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tutorial: Basics - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Timeline.html">Timeline</a><ul class='methods'><li data-type='method'><a href="Timeline.html#add">add</a></li><li data-type='method'><a href="Timeline.html#addLabel">addLabel</a></li><li data-type='method'><a href="Timeline.html#from">from</a></li><li data-type='method'><a href="Timeline.html#fromTo">fromTo</a></li><li data-type='method'><a href="Timeline.html#to">to</a></li></ul></li><li><a href="TWEEN.html">TWEEN</a><ul class='methods'><li data-type='method'><a href="TWEEN.html#.add">add</a></li><li data-type='method'><a href="TWEEN.html#.autoPlay">autoPlay</a></li><li data-type='method'><a href="TWEEN.html#.get">get</a></li><li data-type='method'><a href="TWEEN.html#.has">has</a></li><li data-type='method'><a href="TWEEN.html#.isRunning">isRunning</a></li><li data-type='method'><a href="TWEEN.html#.onTick">onTick</a></li><li data-type='method'><a href="TWEEN.html#.remove">remove</a></li><li data-type='method'><a href="TWEEN.html#.removeAll">removeAll</a></li><li data-type='method'><a href="TWEEN.html#.update">update</a></li></ul></li><li><a href="Tween_.html">Tween</a><ul class='methods'><li data-type='method'><a href="Tween_.html#.from">from</a></li><li data-type='method'><a href="Tween_.html#.fromTo">fromTo</a></li><li data-type='method'><a href="Tween_.html#.to">to</a></li><li data-type='method'><a href="Tween_.html#chainedTweens">chainedTweens</a></li><li data-type='method'><a href="Tween_.html#delay">delay</a></li><li data-type='method'><a href="Tween_.html#duration">duration</a></li><li data-type='method'><a href="Tween_.html#easing">easing</a></li><li data-type='method'><a href="Tween_.html#emit">emit</a></li><li data-type='method'><a href="Tween_.html#interpolation">interpolation</a></li><li data-type='method'><a href="Tween_.html#isPlaying">isPlaying</a></li><li data-type='method'><a href="Tween_.html#isStarted">isStarted</a></li><li data-type='method'><a href="Tween_.html#off">off</a></li><li data-type='method'><a href="Tween_.html#on">on</a></li><li data-type='method'><a href="Tween_.html#once">once</a></li><li data-type='method'><a href="Tween_.html#pause">pause</a></li><li data-type='method'><a href="Tween_.html#play">play</a></li><li data-type='method'><a href="Tween_.html#reassignValues">reassignValues</a></li><li data-type='method'><a href="Tween_.html#render">render</a></li><li data-type='method'><a href="Tween_.html#repeat">repeat</a></li><li data-type='method'><a href="Tween_.html#restart">restart</a></li><li data-type='method'><a href="Tween_.html#reverse">reverse</a></li><li data-type='method'><a href="Tween_.html#reversed">reversed</a></li><li data-type='method'><a href="Tween_.html#reverseDelay">reverseDelay</a></li><li data-type='method'><a href="Tween_.html#seek">seek</a></li><li data-type='method'><a href="Tween_.html#setMaxListener">setMaxListener</a></li><li data-type='method'><a href="Tween_.html#start">start</a></li><li data-type='method'><a href="Tween_.html#stop">stop</a></li><li data-type='method'><a href="Tween_.html#to">to</a></li><li data-type='method'><a href="Tween_.html#update">update</a></li><li data-type='method'><a href="Tween_.html#yoyo">yoyo</a></li></ul></li><li><a href="TWEEN.Easing.html">Easing</a></li><li><a href="TWEEN.Interpolation.html">Interpolation</a></li><li><a href="TWEEN.Plugins.html">Plugins</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-Basics.html">Basics</a></li><li><a href="tutorial-Compatibility.html">Compatibility</a></li><li><a href="tutorial-Simple Demos.html">Simple Demos</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Tutorial: Basics</h1>
    

    <section>

<header>
    

    <h2>Basics</h2>
</header>

<article>
    <h1>ES6-Tween user guide</h1><p><em><strong>NOTE</strong> this is a work in progress, please excuse the gaps. Wherever you see something marked as TODO, it's not done yet. If you find that something is unclear or missing details, please <a href="https://github.com/tweenjs/es6-tween/issues/new">file an issue</a> and help make this guide better. Or feel free to submit clarifications or improvements of your own if you feel you can help too!</em></p>
<h2>What is a tween? How do they work? Why do you want to use them?</h2><p>A tween (from <a href="http://en.wikipedia.org/wiki/Inbetweening"><em>in-between</em></a>) is a concept that allows you to change the values of the properties of an object in a smooth way. You just tell it which properties you want to change, which final values should they have when the tween finishes running, and how long should this take, and the tweening engine will take care of finding the intermediate values from the starting to the ending point. For example, suppose you have a <code>position</code> object with <code>x</code> and <code>y</code> coordinates:</p>
<pre class="prettyprint source lang-javascript"><code>let position = { x: 100, y: 0 }</code></pre><p>If you wanted to change the <code>x</code> value from <code>100</code> to <code>200</code>, you'd do this:</p>
<pre class="prettyprint source lang-javascript"><code>// Create a tween for position first
let tween = new TWEEN.Tween(position);

// Then tell the tween we want to animate the x property over 1000 milliseconds
tween.to({ x: 200 }, 1000);</code></pre><p>Actually this won't do anything yet. The tween has been created but it's not active. You need to start it:</p>
<pre class="prettyprint source lang-javascript"><code>// And set it to start
tween.start();</code></pre><p>Finally in order to run as smoothly as possible you should call the <code>TWEEN.update</code> function in the same main loop you're using for animating. This generally looks like this:</p>
<pre class="prettyprint source lang-javascript"><code>animate();

function animate() {
    requestAnimationFrame(animate);
    // [...]
    TWEEN.update();
    // [...]
}</code></pre><p>or you can use <code>autoPlay</code></p>
<pre class="prettyprint source lang-javascript"><code>TWEEN.autoPlay(true);</code></pre><p>This will take care of updating all active tweens; after 1 second (i.e. 1000 milliseconds) <code>position.x</code> will be <code>200</code>.</p>
<p>But unless you print the value of <code>x</code> to the console, you can't see its value changing. You might want to use the <code>onUpdate</code> callback:</p>
<pre class="prettyprint source lang-javascript"><code>tween.on('update', ({x}) => {
    console.log(x);
});</code></pre><p>This function will be called each time the tween is updated; how often this happens depends on many factors--how fast (and how busy!) your computer or device is, for example.</p>
<p>So far we've only used tweens to print values to the console, but you could use it for things such as animating positions of three.js objects:</p>
<pre class="prettyprint source lang-javascript"><code>let tween = new TWEEN.Tween(cube.position)
        .to({ x: 100, y: 100, z: 100 }, 10000)
        .start();

TWEEN.autoPlay(false); // We need manually render for performance as threeRenderer too should be rendered
animate();

function animate() {
    requestAnimationFrame(animate);
    TWEEN.update();

    threeRenderer.render(scene, camera);
}</code></pre><p>In this case, because the three.js renderer will look at the object's position before rendering, you don't need to use an explicit <code>onUpdate</code> callback.</p>
<p>You might have noticed something different here too: we're chaining the tween function calls! Each tween function returns the tween instance, so you can rewrite the following code:</p>
<pre class="prettyprint source lang-javascript"><code>let tween = new TWEEN.Tween(position);
    tween.to({ x: 200 }, 1000);
    tween.start();</code></pre><p>into this</p>
<pre class="prettyprint source lang-javascript"><code>let tween = new TWEEN.Tween(position)
    .to({ x: 200 }, 1000)
    .start();</code></pre><p>You'll see this a lot in the examples, so it's good to be familiar with it! Check <a href="../examples/04_simplest.html">04-simplest</a> for a working example.</p>
<h2>Animating with es6-tween</h2><p>es6-tween doesn't run by itself. You need to tell it when to run, by explicitly calling the <code>update</code> method. The recommended method is to do this inside your main animation loop, which should be called with <code>requestAnimationFrame</code> for getting the best graphics performance:</p>
<p>We've seen this example before:</p>
<pre class="prettyprint source lang-javascript"><code>animate();

function animate() {
    requestAnimationFrame(animate);
    // [...]
    TWEEN.update();
    // [...]
}</code></pre><p>If called without parameters, <code>update</code> will determine the current time in order to find out how long has it been since the last time it ran.</p>
<p>However you can also pass an explicit time parameter to <code>update</code>. Thus,</p>
<pre class="prettyprint source lang-javascript"><code>TWEEN.update(100);</code></pre><p>means &quot;update with time = 100 milliseconds&quot;. You can use this to make sure that all the time-dependent functions in your code are using the very same time value. For example suppose you've got a player and want to run tweens in sync. Your <code>animate</code> code could look like this:</p>
<pre class="prettyprint source lang-javascript"><code>let currentTime = player.currentTime;
TWEEN.update(currentTime);</code></pre><p>We use explicit time values for the unit tests. You can have a look at <a href="../test/unit/TestTweens.js">TestTweens</a> to see how we call TWEEN.update() with different values in order to simulate time passing.</p>
<h2>Controlling a tween</h2><h3><code>start</code> and <code>stop</code></h3><p>So far we've learnt about the <code>Tween.start</code> method, but there are more methods that control individual tweens. Probably the most important one is the <code>start</code> counterpart: <code>stop</code>. If you want to cancel a tween, just call this method over an individual tween:</p>
<pre class="prettyprint source"><code>tween.stop();</code></pre><p>Stopping a tween that was never started or that has already been stopped has no effect. No errors are thrown either.</p>
<h3><code>play</code> and <code>pause</code></h3><p>Even you can <code>play</code> and <code>pause</code> individual tweens with easy method:</p>
<pre class="prettyprint source"><code>tween.pause(); // pause tween

tween.play(); // play tween</code></pre><p>The <code>start</code> method also accepts a <code>time</code> parameter. If you use it, the tween won't start until that particular moment in time; otherwise it will start as soon as possible (i.e. on the next call to <code>TWEEN.update</code>).</p>
<h3><code>update</code></h3><p>Individual tweens also have an <code>update</code> method---this is in fact called by <code>TWEEN.update</code>. You generally don't need to call this directly, but might be useful if you're doing <em>crazy hacks</em>.</p>
<h3><code>chain</code></h3><p>Things get more interesting when you sequence different tweens in order, i.e. setup one tween to start once a previous one has finished. We call this <em>chaining tweens</em>, and it's done with the <code>chain</code> method. Thus, to make <code>tweenB</code> start after <code>tweenA</code> finishes:</p>
<pre class="prettyprint source lang-javascript"><code>tweenA.chain(tweenB);</code></pre><p>Or, for an infinite chain, set <code>tweenA</code> to start once <code>tweenB</code> finishes:</p>
<pre class="prettyprint source lang-javascript"><code>tweenA.chain(tweenB);
tweenB.chain(tweenA);</code></pre><p>Check <a href="../examples/00_hello_world.html">Hello world</a> to see an example of these infinite chains.</p>
<p>In other cases, you may want to chain multiple tweens to another tween in a way that they (the chained tweens) all start animating at the same time:</p>
<pre class="prettyprint source lang-javascript"><code>tweenA.chain(tweenB,tweenC);</code></pre><h3><code>repeat</code></h3><p>If you wanted a tween to repeat forever you could chain it to itself, but a better way is to use the <code>repeat</code> method. It accepts a parameter that describes how many repetitions you want:</p>
<pre class="prettyprint source lang-javascript"><code>tween.repeat(10); // repeats 10 times and stops
tween.repeat(Infinity); // repeats forever</code></pre><p>Check the <a href="../examples/08_repeat.html">Repeat</a> example.</p>
<h3><code>yoyo</code></h3><p>This function only has effect if used along with <code>repeat</code>. When active, the behaviour of the tween will be <em>like a yoyo</em>, i.e. it will bounce to and from the start and end values, instead of just repeating the same sequence from the beginning.</p>
<h3><code>delay</code></h3><p>More complex arrangements might require delaying a tween before it actually starts running. You can do that using the <code>delay</code> method:</p>
<pre class="prettyprint source lang-javascript"><code>tween.delay(1000);
tween.start();</code></pre><p>will start executing 1 second after the <code>start</code> method has been called.</p>
<h2>Controlling <em>all</em> the tweens</h2><p>The following methods are found in the TWEEN global object, and you generally won't need to use most of them, except for <code>update</code>.</p>
<h3><code>TWEEN.update(time)</code></h3><p>We've already talked about this method. It is used to update all the active tweens.</p>
<p>If <code>time</code> is not specified, it will use the current time.</p>
<h3><code>TWEEN.getAll</code> and <code>TWEEN.removeAll</code></h3><p>Used to get a reference to the active <code>tweens</code> array and to remove all of them from the array with just one call, respectively.</p>
<h3><code>TWEEN.add(tween)</code> and <code>TWEEN.remove(tween)</code></h3><p>Used to add a tween to the list of active tweens, or to remove an specific one from the list, respectively.</p>
<p>These methods are usually used internally only, but are exposed just in case you want to do something <em>funny</em>.</p>
<h2>Changing the easing function (AKA make it bouncy)</h2><p>es6-tween will perform the interpolation between values (i.e. the easing) in a linear manner, so the change will be directly proportional to the elapsed time. This is predictable but also quite uninteresting visually wise. Worry not--this behaviour can be easily changed using the <code>easing</code> method. For example:</p>
<pre class="prettyprint source lang-javascript"><code>tween.easing(TWEEN.Easing.Quadratic.In);</code></pre><p>This will result in the tween slowly starting to change towards the final value, accelerating towards the middle, and then quickly reaching its final value. In contrast, <code>TWEEN.Easing.Quadratic.Out</code> would start changing quickly towards the value, but then slow down as it approaches the final value.</p>
<h3>Available easing functions: <code>TWEEN.Easing</code></h3><p>There are a few existing easing functions provided with es6-tween. They are grouped by the type of equation they represent: Linear, Quadratic, Cubic, Quartic, Quintic, Sinusoidal, Exponential, Circular, Elastic, Back and Bounce, and then by the easing type: In, Out and InOut.</p>
<p>Probably the names won't be saying anything to you unless you're familiar with these concepts already, so it is probably the time to check the <a href="../examples/03_graphs.html">Graphs</a> example, which graphs all the curves in one page so you can compare how they look at a glance.</p>
<p><em>Credit where credit is due:</em> these functions are derived from the original set of equations that Robert Penner graciously made available as free software a few years ago, but have been optimised to play nicely with JavaScript.</p>
<h3>Using a custom easing function</h3><p>Not only can you use any of the existing functions, but you can also provide your own, as long as it follows a couple of conventions:</p>
<ul>
<li>it must accept one parameter:<ul>
<li><code>k</code>: the easing progress, or how far along the duration of the tween we are. Allowed values are in the range [0, 1].</li>
</ul>
</li>
<li>it must return a value based on the input parameters.</li>
</ul>
<p>The easing function is only called <em>once per tween</em> on each update, no matter how many properties are to be changed. The result is then used with the initial value and the difference (the <em>deltas</em>) between this and the final values, as in this pseudocode:</p>
<pre class="prettyprint source"><code>easedElapsed = easing(k);
for each property:
    newPropertyValue = initialPropertyValue + propertyDelta * easedElapsed;</code></pre><p>For the performance obsessed people out there: the deltas are calculated only when <code>start()</code> is called on a tween.</p>
<p>So let's suppose you wanted to use a custom easing function that eased the values but appplied a Math.floor to the output, so only the integer part would be returned, resulting in a sort of step-ladder output:</p>
<pre class="prettyprint source lang-javascript"><code>function tenStepEasing(k) {
    return Math.floor(k * 10) / 10;
}</code></pre><p>And you could use it in a tween by simply calling its easing method, as we've seen before:</p>
<pre class="prettyprint source lang-javascript"><code>tween.easing(tenStepEasing);</code></pre><p>Check the <a href="../examples/12_graphs_custom_functions.html">graphs for custom easing functions</a> example to see this in action (and also some <em>metaprogramming</em> for generating step functions).</p>
<h2>Callbacks</h2><p>Another powerful feature is to be able to run your own functions at specific times in each tween's life cycle. This is usually required when changing properties is not enough.</p>
<p>For example, suppose you're trying to animate some object whose properties can't be accessed directly but require you to call a setter instead. You can use an <code>update</code> callback to read the new updated values and then manually call the setters:</p>
<pre class="prettyprint source lang-javascript"><code>let trickyObjTween = new TWEEN.Tween({
    propertyA: trickyObj.getPropertyA(),
    propertyB: trickyObj.getPropertyB()
})
    .to({ propertyA: 100, propertyB: 200 })
    .on('update', ({propertyA, propertyB) => {
        object.setA( propertyA );
        object.setB( propertyB );
    });</code></pre><p>Or imagine you want to play a sound when a tween is started. You can use an <code>start</code> callback:</p>
<pre class="prettyprint source lang-javascript"><code>let tween = new TWEEN.Tween(obj)
    .to({ x: 100 })
    .once('start', () => {
        sound.play();
    });</code></pre><p>The scope for each callback is the tweened object--in this case, <code>obj</code>.</p>
<h3>Events</h3><p>In ES6 implementation we try to use <code>on</code>, <code>once</code> and <code>emit</code> similar to <code>node.js</code> <code>emit</code> events, but easier to use. This way extends flexibility over tweens and reduces size as well. With <code>event</code> methods, callback isn't limitation anymore, even you can extend events</p>
<pre class="prettyprint source lang-javascript"><code>tween.once('start', (object) => {
    console.log('start called');
});
// 'start' calls when tween starts

tween.once('completed_my_tween', (sureArg) => {
    console.log('tween is really ' + (sureArg ? 'completed' : 'incompleted'));
});

tween.once('complete', function () {
    tween.emit('completed_my_tween', !this._isPlaying);
});</code></pre><h2>Advanced tweening</h2><h3>Relative values</h3><p>You can also use relative values when using the <code>to</code> method. When the tween is started, es6-tween will read the current property values and apply the relative values to find out the new final values. But <strong>you need to use quotes</strong> or the values will be taken as absolute. Let's see this with an example:</p>
<pre class="prettyprint source lang-javascript"><code>// This will make the `x` property be 100, always
let absoluteTween = new TWEEN.Tween(absoluteObj).to({ x: 100 });

// Suppose absoluteObj.x is 0 now
absoluteTween.start(); // Makes x go to 100

// Suppose absoluteObj.x is -100 now
absoluteTween.start(); // Makes x go to 100

// In contrast...

// This will make the `x` property be 100 units more,
// relative to the actual value when it starts
let relativeTween = new TWEEN.Tween(relativeObj).to({ x: &quot;+100&quot; });

// Suppose relativeObj.x is 0 now
relativeTween.start(); // Makes x go to 0 +100 = 100

// Suppose relativeObj.x is -100 now
relativeTween.start(); // Makes x go to -100 +100 = 0</code></pre><p>Check <a href="../examples/09_relative_values.html">09_relative_values</a> for an example.</p>
<h3>Tweening to arrays of values</h3><p>In addition to tweening to an absolute or a relative value, you can also have es6-tween change properties across a series of values. To do this, you just need to specify an array of values instead of a single value for a property. For example:</p>
<pre class="prettyprint source lang-javascript"><code>let tween = new TWEEN.Tween(relativeObj).to({ x: [0, -100, 100] });</code></pre><p>will make <code>x</code> go from its initial value to 0, -100 and 100.</p>
<p>The way these values are calculated is as follows:</p>
<ul>
<li>first the tween progress is calculated as usual</li>
<li>the progress (from 0 to 1) is used as input for the interpolation function</li>
<li>based on the progress and the array of values, an interpolated value is generated</li>
</ul>
<p>For example, when the tween has just started (progress is 0), the interpolation function will return the first value in the array. When the tween is halfway, the interpolation function will return a value approximately in the middle of the array, and when the tween is at the end, the interpolation function will return the last value. </p>
<p>You can change the interpolation function with the <code>interpolation</code> method. For example:</p>
<pre class="prettyprint source lang-javascript"><code>tween.interpolation( TWEEN.Interpolation.Bezier );</code></pre><p>The following values are available:</p>
<ul>
<li>TWEEN.Interpolation.Linear</li>
<li>TWEEN.Interpolation.Bezier</li>
<li>TWEEN.Interpolation.CatmullRom</li>
</ul>
<p>The default is <code>Linear</code>.</p>
<p>Note that the interpolation function is global to all properties that are tweened with arrays in the same tween. You can't make property A change with an array and a Linear function, and property B with an array too and a Bezier function using the same tween; you should use two tween objects running over the same object but modifying different properties and using different interpolation functions.</p>
<p>Check <a href="../examples/06_array_interpolation.html">06_array_interpolation</a> for an example.</p>
<h2>Getting the best performance</h2><p>While es6-tween tries to be performant on its own, nothing prevents you from using it in a way that is counterperformant. Here are some of the ways you can avoid slowing down your projects when using es6-tween (or when animating in the web, in general).</p>
<h3>Use performant CSS</h3><p>When you try to animate the position of an element in the page, the easiest solution is to animate the <code>top</code> and <code>left</code> style properties, like this:</p>
<pre class="prettyprint source lang-javascript"><code>let element = document.getElementById('myElement');
let tween = new TWEEN.Tween({ top: 0, left: 0 })
    .to({ top: 100, left: 100 }, 1000)
    .on('update', ({top, left}) => {
        element.style.top = top + 'px';
        element.style.left = left + 'px';
    });</code></pre><p>but this is really inefficient because altering these properties forces the browser to recalculate the layout on each update, and this is a very costly operation. Instead of using these, you should use <code>transform</code>, which doesn't invalidate the layout and will also be hardware accelerated when possible, like this:</p>
<pre class="prettyprint source lang-javascript"><code>let element = document.getElementById('myElement');
let tween = new TWEEN.Tween({ x: 0, y: 0 })
    .to({ x: 100, y: 100 }, 1000)
    .on('update', ({x, y}) => {
        element.style.transform = `translate3d(${x}px, ${y}px,0);`;
    });</code></pre><p>If you want to read more about this, have a look at <a href="http://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/">this article</a>.</p>
<p>However, if your animation needs are <em>that</em> simple, it might be better to just use CSS animations or transitions, where applicable, so that the browser can optimise as much as possible. es6-tween is most useful when your animation needs involve complex arrangements, i.e. you need to sync several tweens together, have some start after one has finished, loop them a number of times, etc.</p>
<h3>Be good to the Garbage collector (alias the GC)</h3><p>If you use an <code>onUpdate</code> callback, you need to be very careful with what you put on it. This function will be called many times per second, so if you're doing costly operations on each update, you might block the main thread and cause horrible <em>jank</em>, or---if your operations involve memory allocations, you'll end up getting the garbage collector to run too often, and cause <em>jank</em> too. So just don't do either of those things. Keep your <code>onUpdate</code> callbacks very lightweight, and be sure to also use a memory profiler while you're developing.</p>
<h2>Crazy tweening</h2><p>This is something you might not use often, but you can use the tweening equations outside of es6-tween. They're just functions, after all. So you could use them to calculate smooth curves as input data. For example, they're used to generate audio data in <a href="http://5013.es/toys/tween.audio/">this experiment</a>.</p>
</article>

</section>

</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Nov 10 2017 22:03:22 GMT+0500 (Западная Азия (зима)) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>